<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
    <title>Upload</title>
  </head>
  <header>
    <a href="/">Home</a>

    <% if (user) { %>
    <a href="/new-message">Leave a message</a>

    <a href="/profile">Profile</a>

    <a href="/logout">Logout</a>

    <% } else { %>

    <a href="/login">Login</a>

    <a href="/sign-up">Sign Up</a>

    <% } %>
  </header>
  <body>
    <% if (user) { %>
    <h1>Directories</h1>
    <div class="addDir">
      <form action="/newDir" method="POST">
        <label for="newDir">New folder</label>
        <input type="text" name="dirName" />
        <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
        <ul class="errors">
          <% errors.forEach(error => { %>
          <li><%= error.msg %></li>
          <% }); %>
        </ul>
        <% } %>
        <button class="addNewFolder" type="submit">+</button>
      </form>
    </div>
    <% directories.directories.forEach(dir => { %>
    <div class="dir-container">
      <p><%= dir %></p>
      <a class="edit" href="/new-name/<%= dir %>">
        <i id="<%= dir %>" class="fas fa-edit"></i>
      </a>
      <a class="delete" href="/dirDelete/<%= dir %>">
        <i id="<%= dir %>" class="fas fa-trash-alt"></i>
      </a>
    </div>
    <% })} %>
    <h1>Files</h1>
    <% files.files.forEach(file => { %>
    <div class="file-container">
      <p><%= file %></p>
      <a class="edit" href="/fileEdit/">
        <i id="<%= file %>" class="fas fa-edit"></i>
      </a>
      <a class="delete" href="/fileDelete/<%= file %>">
        <i id="<%= file %>" class="fas fa-trash-alt"></i>
      </a>
    </div>
    <% }) %> <% if (user) { %>

    <div class="addFile">
      <form action="/upload" method="POST" enctype="multipart/form-data">
        <label for="upload">Upload file</label>
        <input type="file" name="avatar" />
        <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
        <ul class="errors">
          <% errors.forEach(error => { %>
          <li><%= error.msg %></li>
          <% }); %>
        </ul>
        <% } %>
        <button class="addNewFile" type="submit">+</button>
      </form>
    </div>
    <% } %>
  </body>
</html>
